# Google Maps API 测试文件使用说明

## 文件说明
`google_maps_api_test.js` 是一个独立的测试文件，用于测试Google Maps API的两个主要功能：
1. **地址转经纬度** - 使用Google Geocoding API
2. **周边搜索** - 使用Google Places API

## 功能特性

### 测试1: 地址转经纬度
- 输入任意地址（支持中文地址）
- 返回精确的经纬度坐标
- 返回格式化后的标准地址

### 测试2: 周边搜索
搜索以下8种常见场景：
- 🏫 学校
- 🏥 医院
- 💊 药房
- 🍽️ 餐厅
- 🛍️ 商场
- 🚇 地铁站
- 🏦 银行
- 🏞️ 公园

每个类别返回最近的3个地点，包含：
- 地点名称
- 地址
- 评分（如果有）
- 距离（米）

## 使用方法

### 1. 确保环境变量设置
确保你的 `.env` 文件中包含：
```
GOOGLE_MAPS_API_KEY=你的Google_Maps_API密钥
```

### 2. 运行测试
```bash
# 在项目根目录运行
node google_maps_api_test.js
```

### 3. 自定义测试
你也可以在其他文件中导入并使用：

```javascript
const GoogleMapsAPITester = require('./google_maps_api_test');

async function customTest() {
  const tester = new GoogleMapsAPITester();

  // 测试单个地址
  const result = await tester.runFullTest('北京市朝阳区三里屯太古里');

  console.log('坐标:', result.coordinates);
  console.log('周边地点:', result.nearbyPlaces);
}

customTest();
```

## 测试地址
文件内置了4个测试地址：
- 北京市朝阳区三里屯太古里
- 上海市浦东新区陆家嘴
- 广州市天河区珠江新城
- 深圳市南山区科技园

## 输出示例
```
🚀 开始Google Maps API测试
==================================================

=== 测试1: 地址转经纬度 ===
输入地址: 北京市朝阳区三里屯太古里
✅ 地址转换成功!
格式化地址: 北京市朝阳区三里屯路19号
纬度: 39.9369
经度: 116.4551

=== 测试2: 周边搜索 ===
搜索半径: 1000米

🔍 搜索学校...
✅ 找到 3 个学校:
  1. 北京三里屯一中 (450米) - 北京市朝阳区三里屯路
  2. 北京外国语大学附属中学 (780米) - 北京市朝阳区工体北路
  3. 北京市朝阳区实验小学 (920米) - 北京市朝阳区工体东路

🔍 搜索医院...
✅ 找到 3 个医院:
  1. 北京协和医院 (320米) - 北京市东城区东单帅府园1号
  2. 北京同仁医院 (650米) - 北京市东城区东交民巷1号
  3. 北京医院 (890米) - 北京市东城区东单大华路1号

...

=== 测试完成 ===
✅ 所有测试通过!
```

## 注意事项
1. 确保你的Google Maps API密钥已启用以下服务：
   - Geocoding API
   - Places API

2. API有使用限制，测试间隔2秒避免超出配额

3. 搜索结果按距离排序，每个类别最多返回3个结果

4. 距离计算使用Haversine公式，精确到米

## 错误处理
- 如果API密钥未设置，会抛出错误
- 如果地址未找到，会显示相应错误信息
- 如果某个类别搜索失败，会跳过该类别继续测试其他类别